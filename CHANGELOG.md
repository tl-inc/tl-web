# Changelog

æ‰€æœ‰é‡è¦çš„è®Šæ›´éƒ½æœƒè¨˜éŒ„åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚

## [Unreleased]

### å‹åˆ¥å®‰å…¨èˆ‡ç¨‹å¼ç¢¼å“è³ªæ”¹é€² (2025-10-26)

#### Upgraded
- å‡ç´š Storybook å¾ 9.1.13 â†’ 9.1.15 (patch æ›´æ–°)
- å‡ç´š React å’Œ React DOM å¾ 19.1.0 â†’ 19.2.0 (minor æ›´æ–°)
- æ‰€æœ‰æ¸¬è©¦é€šéé©—è­‰ (355/355 tests passing)
- Storybook æ­£å¸¸é‹ä½œç¢ºèª

#### Fixed
- ä¿®æ­£ RangeSelector é¡å‹åŒ¯å‡ºéŒ¯èª¤ï¼š`GradeOption` â†’ `GradeSemesterOption` (index.ts:13)
- è£œå…¨ `RangePack` ä»‹é¢ç¼ºå°‘çš„æ¬„ä½ï¼š`semester`, `display_order`, `description`, `created_at`, `updated_at` (rangePack.ts)
- ä¿®æ­£æ¸¬è©¦æª”æ¡ˆé¡å‹éŒ¯èª¤ï¼š`NavigationPanel.test.tsx` mode åƒæ•¸å¾ `string` æ”¹ç‚º `PageMode` (NavigationPanel.test.tsx:62)
- å‡ç´šåœ–ç‰‡å…ƒä»¶ï¼šå°‡ `<img>` æ›¿æ›ç‚º Next.js `<Image />` ä»¥æå‡æ•ˆèƒ½ (ItemSetExercise.tsx:76-86)

#### Removed
- æ¸…ç† 7 å€‹æª”æ¡ˆçš„æœªä½¿ç”¨ importsï¼š`within`, `fireEvent`, `vi`, `usePaperActions`, `PaperData`, `usePaperDataStore`
- ç§»é™¤ Storybook æª”æ¡ˆä¸­çš„ 11 å€‹ `console.log` èªå¥ (ClozeExercise.stories.tsx)
- æ¸…ç†æœªä½¿ç”¨è®Šæ•¸ï¼š`originalBody` (select.test.tsx), `answers` (usePaperActions.ts)

#### Improved
- ESLint è­¦å‘Šå¾ 23 â†’ 0 (100% æ”¹é€²)
- TypeScript ç·¨è­¯éŒ¯èª¤å¾ 3 â†’ 0
- ç”Ÿç”¢æ§‹å»ºç¾åœ¨å¯æ­£å¸¸å®Œæˆ
- æ–°å¢ç¼ºå°‘çš„é¡å‹åŒ¯å‡ºï¼š`PublisherEditionOption`, `PublisherEditionsResponse`

#### Dependency Upgrade Evaluation
å®Œæˆä¸»è¦ç‰ˆæœ¬å‡ç´šè©•ä¼°ï¼ˆä½¿ç”¨ MCP Context7 + WebSearchï¼‰ï¼š

**Vitest 3.2.4 â†’ 4.0.3**
- âŒ **æš«ä¸å‡ç´š** - ä¸»è¦ç‰ˆæœ¬è·³èºé¢¨éšªé«˜ï¼Œbreaking changes å½±éŸ¿ç¯„åœä¸æ˜ç¢º
- ç ´å£æ€§è®Šæ›´ï¼šCoverage é…ç½®é‡æ§‹ã€Pool options æ”¹åã€Test/Describe åƒæ•¸é †åºè®Šæ›´ã€Mock API è®Šæ›´
- é ä¼°å·¥ä½œé‡ï¼š3.5-5.5 å°æ™‚ï¼ˆéœ€æƒææ‰€æœ‰ 355 å€‹æ¸¬è©¦ï¼‰
- å»ºè­°æ™‚æ©Ÿï¼šç­‰å¾… v4.2+ ç©©å®šç‰ˆæœ¬ï¼ˆ2026 Q2ï¼‰
- ç•¶å‰ç‹€æ…‹ï¼š355/355 tests passingï¼Œæ¸¬è©¦ç‹€æ…‹è‰¯å¥½

**Next.js 15.5.4 â†’ 16.0.0**
- âŒ **å¼·çƒˆä¸å»ºè­°å‡ç´š** - ç ´å£æ€§æ¥µå¤§ï¼Œå½±éŸ¿ç¯„åœæ¥µå»£
- é‡å¤§è®Šæ›´ï¼šAsync Request APIsï¼ˆcookies/headers/params å…¨éƒ¨éœ€è¦ awaitï¼‰ã€Node.js 20.9.0+ è¦æ±‚ã€Middleware â†’ Proxy æ”¹å
- é ä¼°å·¥ä½œé‡ï¼š13-25 å°æ™‚ï¼ˆå¹¾ä¹æ‰€æœ‰ Server Components éœ€è¦æ”¹å‹•ï¼‰
- å»ºè­°æ™‚æ©Ÿï¼šç­‰å¾… v16.3+ å’Œç¤¾ç¾¤æœ€ä½³å¯¦è¸æˆç†Ÿï¼ˆ2026 Q2-Q3ï¼‰
- ç•¶å‰ç‹€æ…‹ï¼šNext.js 15.5.4 ç©©å®šä¸”æˆç†Ÿï¼ŒReact 19.2.0 å®Œå…¨ç›¸å®¹

**ç¶œåˆå»ºè­°**ï¼šä¿æŒä¾è³´é …ç©©å®šï¼Œå°ˆæ³¨åŠŸèƒ½é–‹ç™¼ï¼Œåƒ…åŸ·è¡Œ minor/patch å®‰å…¨æ›´æ–°

### åˆ·é¡Œæ¨¡å¼ (Exercise Session) åŠŸèƒ½æ”¹é€²

#### Added
- æ–°å¢è§¸è¦ºå›é¥‹ï¼šé»æ“Šç­”æ¡ˆé¸é …æ™‚è§¸ç™¼ 10ms çŸ­éœ‡å‹• (page.tsx:74-76)
- æ–°å¢é€£å‹å¾½ç« ï¼š2 é€£å‹ä»¥ä¸Šé¡¯ç¤ºè¯éº—çš„æ¼¸å±¤ç«ç„°å¾½ç«  ğŸ”¥ (page.tsx:191-197)
- æ–°å¢è‡ªå‹•æ²å‹•ï¼šæ›é¡Œæ™‚è‡ªå‹•æ²å‹•åˆ°é é¢é ‚éƒ¨ï¼Œç¢ºä¿çµ±è¨ˆè³‡è¨Šå¯è¦‹ (page.tsx:66)
- æ”¯æ´æ–‡æ³•é¡Œ (type 3)ï¼šæ–‡æ³•é¡Œç¾åœ¨ä½¿ç”¨ MCQ æ ¼å¼æ­£ç¢ºé¡¯ç¤º (ExerciseRenderer.tsx:41, 88)

#### Changed
- æ”¹é€²çµ±è¨ˆè³‡è¨Šé¡¯ç¤º (page.tsx:167-198)ï¼š
  - ã€Œæ­£ç¢ºç‡ã€æ”¹ç‚ºã€Œå·²å®Œæˆï¼šã€+ ç¸½é¡Œæ•¸
  - æ–°å¢ã€Œï¼¯ï¼šã€é¡¯ç¤ºç­”å°æ•¸ï¼ˆç¶ è‰²ï¼‰
  - æ–°å¢ã€Œï¼¸ï¼šã€é¡¯ç¤ºç­”éŒ¯æ•¸ï¼ˆç´…è‰²ï¼‰
  - é€£å‹è³‡è¨Šåªåœ¨ 2 é€£å‹ä»¥ä¸Šæ™‚é¡¯ç¤º
- ä¿®æ­£ NaN é¡¯ç¤ºå•é¡Œï¼šç¢ºä¿æ‰€æœ‰çµ±è¨ˆæ•¸å€¼éƒ½æœ‰é è¨­å€¼ 0 (page.tsx:188)

#### Fixed
- ä¿®æ­£æ–‡æ³•é¡Œä¸é¡¯ç¤ºçš„å•é¡Œï¼štype 3 (æ–‡æ³•) ç¾åœ¨æ­£ç¢ºä½¿ç”¨ MCQ æ ¼å¼è€Œé Cloze æ ¼å¼
- ä¿®æ­£æ›é¡Œæ™‚æ²å‹•å¤±æ•ˆå•é¡Œï¼šç§»å‹• scrollTo åˆ° useEffect ä¸­ï¼Œåœ¨æ–°é¡Œç›®è¼‰å…¥å¾ŒåŸ·è¡Œ
- ä¿®æ­£çµ±è¨ˆæ•¸å€¼é¡¯ç¤ºï¼šä½¿ç”¨æ­£ç¢ºçš„æ¬„ä½åç¨± `total_questions` è€Œé `total_answered`

#### Backend Changes
- æ–°å¢ skill.metadata æ¬„ä½åˆ° Pydantic schema (exercise_session.py:55)
- ä¿®æ­£ SQLAlchemy å±¬æ€§åç¨±ï¼šä½¿ç”¨ `skill.skill_metadata` å’Œ `item.item_metadata` (exercise_session_manager.py:223, 569)
- é¡Œç›®å…§å®¹åŒ…å« metadata æ¬„ä½ï¼Œæ”¯æ´ç¿»è­¯å’Œè©æ€§è³‡è¨Š

#### Frontend Changes
- POS å€¼ä¸­æ–‡åŒ–ï¼šauxiliary â†’ åŠ©å‹•è©, noun â†’ åè©ç­‰ (page.tsx:183-196)
- ç§»é™¤ skill level æ˜Ÿç´šé¡¯ç¤º
- ç§»é™¤ skill name å¾Œçš„ (lexicon) é¡å‹æ¨™ç±¤
- ç§»é™¤ã€Œåˆ·é¡Œç·´ç¿’ã€ä¸»æ¨™é¡Œï¼Œæ”¹ç‚ºç°¡æ½”çš„é ‚éƒ¨å°èˆªåˆ—
- å„ªåŒ–æ‰‹æ©Ÿé¡¯ç¤ºï¼šresponsive padding, sticky navigation
- æ–°å¢å‘å·¦æ»‘å‹•æ›é¡Œæ‰‹å‹¢ï¼ˆåƒ…åœ¨é¡¯ç¤ºç­”æ¡ˆå¾Œå¯ç”¨ï¼‰

#### Tests
- æ–°å¢ ExerciseRenderer æ¸¬è©¦ï¼šæ¶µè“‹ type 1, 2, 3 çš„ MCQ æ ¼å¼æ”¯æ´
- æ–°å¢åˆ·é¡Œé é¢æ¸¬è©¦ï¼š
  - çµ±è¨ˆè³‡è¨Šæ­£ç¢ºé¡¯ç¤º
  - é€£å‹å¾½ç« é¡¯ç¤ºé‚è¼¯
  - è§¸è¦ºå›é¥‹åŠŸèƒ½
  - è‡ªå‹•æ²å‹•è¡Œç‚º
  - æ»‘å‹•æ‰‹å‹¢åµæ¸¬

## Previous Changes

(å¾…è£œå……å…ˆå‰çš„ç‰ˆæœ¬è¨˜éŒ„)
